---
title: "scratch"
output: html_notebook
---






```{r}
library(googlesheets4)
library(tidyverse)
library(NPS)
library(shinydashboard)
```

```{r}
  infoBox(
            nps_score, "NPS Score",
            color = if (nps_score>=50){
                "green"
            } else if (nps_score<50 | nps_score > 0){
                "yellow"
            } else {
                "red"
            }
        )
```




Data import
```{r}
nps_data <- read_sheet("https://docs.google.com/spreadsheets/d/1OG2i1gIv0J9bZMxRr8O2SHYxQsu27LjRbBUBnaZ7zvM/edit?usp=sharing")

#variable name cleaning
names(nps_data) <- tolower(names(nps_data))
nps_data <- rename(nps_data,
                   nps=`how likely are you to recommend trivago to a friend or colleague?`,
                   country=`country of respondent`) 

#NPS Calculations
nps_score <- nps(nps_data$nps)*100
nps_data$nps_category <- npc(nps_data$nps)

```




















```{r}
ggplot(nps_data)+
            geom_bar(
                mapping = aes(x="", fill = factor(nps_category, levels = c("Promoter", "Passive","Detractor"))),
                position = "fill",
                width = 0.5
               )+
            scale_fill_manual(values = c("springgreen3","gold", "firebrick"))+
            coord_flip()+
            labs(fill="")+
            theme_minimal()+
            theme(
                axis.title.x=element_blank(),
                axis.title.y=element_blank(),
                axis.text.y=element_blank(),
                panel.grid.major.y = element_blank(),
                axis.text.x = element_text(color = "grey20", size = 10),
                text = element_text(size=13)
            )
```



























